using System;
using System.IO;
using System.Linq;
using Microsoft.ML;

namespace RDocsCoreConsole
{
    class Program
    {
        const string dataFolder = "..\\..\\..\\data";
        private static string _appPath => Path.GetDirectoryName(Environment.GetCommandLineArgs()[0]);
        private static string _trainDataPath => Path.Combine(_appPath, dataFolder, "RDox-Training-80.tsv");
        private static string _trainTypeDataPath => Path.Combine(_appPath, dataFolder, "RDox-Types.tsv");
        private static string _testDataPath => Path.Combine(_appPath, dataFolder, "RDox-Testing-20.tsv");
        private static string _modelPath => Path.Combine(_appPath, dataFolder, "model.zip");

        private static MLContext _mlContext;
        private static PredictionEngine<Document, TypePrediction> _predEngine;
        private static ITransformer _trainedModel;
        static IDataView _trainingDataView;
        static IDataView _typesDataView;

        static void Main(string[] args)
        {
            _mlContext = new MLContext(seed: 0);

            _trainingDataView = _mlContext.Data.LoadFromTextFile<Document>(_trainDataPath, hasHeader: true);
            _typesDataView = _mlContext.Data.LoadFromTextFile<Document>(_trainTypeDataPath, hasHeader: true);

            Console.WriteLine("All set!");

            var pipeline = ProcessData();
            // </SnippetCallProcessData>

            // <SnippetCallBuildAndTrainModel>
            var trainingPipeline = BuildAndTrainModel(_trainingDataView, pipeline);
            // </SnippetCallBuildAndTrainModel>

            // <SnippetCallEvaluate>
            Evaluate(_trainingDataView.Schema);
            // </SnippetCallEvaluate>

            // <SnippetCallPredictIssue>
            PredictDocument();
            // </SnippetCallPredictIssue>
        }

        public static IEstimator<ITransformer> ProcessData()
        {
            Console.WriteLine($"=============== Processing Data ===============");
            // STEP 2: Common data process configuration with pipeline data transformations
            // <SnippetMapValueToKey>
            var pipeline = _mlContext.Transforms.Conversion.MapValueToKey(inputColumnName: "Type", outputColumnName: "Label")
                            // </SnippetMapValueToKey>
                            // <SnippetFeaturizeText>
                            .Append(_mlContext.Transforms.Text.FeaturizeText(inputColumnName: "Contents", outputColumnName: "ContentsFeaturized"))
                            // </SnippetFeaturizeText>
                            // <SnippetConcatenate>
                            // .Append(_mlContext.Transforms.Concatenate("Features", "TitleFeaturized", "DescriptionFeaturized"))
                            // </SnippetConcatenate>
                            //Sample Caching the DataView so estimators iterating over the data multiple times, instead of always reading from file, using the cache might get better performance.
                            // <SnippetAppendCache>
                            .AppendCacheCheckpoint(_mlContext);
            // </SnippetAppendCache>

            Console.WriteLine($"=============== Finished Processing Data ===============");

            // <SnippetReturnPipeline>
            return pipeline;
            // </SnippetReturnPipeline>
        }

        public static IEstimator<ITransformer> BuildAndTrainModel(IDataView trainingDataView, IEstimator<ITransformer> pipeline)
        {
            // STEP 3: Create the training algorithm/trainer
            // Use the multi-class SDCA algorithm to predict the label using features.
            // Set the trainer/algorithm and map label to value (original readable state)
            // <SnippetAddTrainer> 
            var trainingPipeline =
                pipeline.Append(_mlContext.MulticlassClassification.Trainers.SdcaMaximumEntropy("Label", "ContentsFeaturized"))
                    .Append(_mlContext.Transforms.Conversion.MapKeyToValue("PredictedLabel"));
            // </SnippetAddTrainer> 

            // STEP 4: Train the model fitting to the DataSet
            Console.WriteLine($"=============== Training the model  ===============");

            // <SnippetTrainModel> 
            _trainedModel = trainingPipeline.Fit(trainingDataView);
            // </SnippetTrainModel> 
            Console.WriteLine($"=============== Finished Training the model Ending time: {DateTime.Now.ToString()} ===============");

            // (OPTIONAL) Try/test a single prediction with the "just-trained model" (Before saving the model)

            // Create prediction engine related to the loaded trained model
            // <SnippetCreatePredictionEngine1>
            _predEngine = _mlContext.Model.CreatePredictionEngine<Document, TypePrediction>(_trainedModel);
            // </SnippetCreatePredictionEngine1>

            // Original type: 5
            Document doc = new Document();
            doc.ID = "10001";
            doc.Contents = "DEL ORIGINAL DE INSTRUMENTO DEPOSITADO EN ESTA INSPECCIÓN CON CONTRATO COLECTIVO DE En Santiago, a 09 de Febrero de 2012, entre Empresa Marisio S.A., representado para estos efectos por la Comisión de Apoderados, integrados por don Claudio Fredes Veas, doña Claudia Ortiz Cáceres y don Juan Vera Vera, todos domiciliados en calle Lautaro N° 3005, comuna de Quilicura, ciudad de Santiago, en adelante la empresa, por una parte y el Sindicato de Trabajadores Marisio S.A., representado por su Directorio integrado por los señores Ulises Adolfo Robles González, Juan Eduardo Rojas Manquelipe y José Miguel Castro Cornejo, por la otra, se ha convenido el siguiente Contrato Colectivo de Trabajo A. DEFINICIONES Empleador o empresa El uso de cualquiera de estas expresiones en el texto de presente Contrato se entenderá referida a Marisio S.A. Trabajador, trabajadores, empleados, funcionarios, personal Para los efectos de este Contrato, cualquiera de estas expresiones se entenderá como denominación de las personas que trabajan en Marisio SA. que tienen calidad de socios de Sindicato de ¶JLS jJsY Trabajadores Marisio S.A. y que están incluidos en la nómina de Anexo 1 de presente  JW Contrato. Indice de Precios al Consumidor o IPC Se entiende como referencia al Indice de Precios al Consumidor que determina el Instituto Nacional de Estadísticas u otro organismo que lo reemplace en el futuro. 8REMUNERACIONES B.1.POLITICA la politica respecto de las remuneraciones que sustenta la Empresa, es compensar no solo L. la eficiencia de la productividad de sus trabajadores, sino también el esfuerzo que hace cada uno por mejorar su formación. B.2.REMUNERACIONES Se define como Remuneraciones a los emolumentos iiensuales regulares recibidos por el trabajador, estructurados según la suma del sueldo base mensual, el contrato por prima de producción y/o trato, la bonificación de incentivos o bono permanente a título personal. 13.3.COMPENSACION POR CUMPLIMIENTO DE CONTRATO La compensación por el cumplimiento de su contrato, por la buena predisposición para colaborar con la Empresa cuando sea requerido y por la eficiencia desuproductividad, se materiatiza.en la suma de los siguientes conceptos que conforman,laremuneraciór T 1 B.3.1. Sueldo Mensual Base Sueldo mensual base, es el ingreso mínimo que la Empresa paga a sus trabajadores por solo el hecho de cumplir con su contrato laboral y cuyo monto final dependerá de su asistencia y puntualidad. B.3.2 Sueldo por contrato de prima de producción y/o trato Sueldo.porCONTRATO DE prima de produccióny/o trato, que representa el compromiso del trabajador con la Empresa de producir, con oportunidad, con calidad y eficiencia las cantidad de piezas que esta requiera y por las cuales pagará un precio previamente acordado. El contrato de -producción cumplirá con las siguientes condiciones Se determinará por la empresa las condiciones y variables del trato, lo que será informado al Sidict a IÓS. trabajadores afectos al mismo. Su duración o vigencia será, como máximo, por el año laboral que comienza el 01 de Febrero y finaliza el 31 de Enero del año siguiente. r las personas; cantidades y precios acórdads en el contrato de prima de producción o trato anteriorrna constituirán precedente niobligación de mantenerlos, para ninguna de las partes. las modificaciones en métodos, procesos y tecnologías  maquinas, herramientas y materiales ; la discontinuidad de artículos y las variaciones de la demanda del mercado, podrán aconsejar la caducidad del contrato y/o la modificación de sus parámetros de medida y/o la disminución de su vigencia. En cualquier caso, antes de aplicar alguna de estas decisiones, se informará con 30 días de anticipación a la otra parte y a la directiva sindical. El trato informado regirá para los trabajadores afectos, sin necesidad que se deba suscribir un anexo de contrato individual en cada oportunidad. En todo caso, la remuneración final a percibir por el trabajador en relación al trabajo realizado no podrá verse disminuida por efecto de las nuevas condiciones que se ,.deterrninen en el contrato ro uccion, conforme lo indicado anterormente El valor del contrato de prima producción o trato se calculará estableciendo modalidades de medición a  Trato de Producción NúmTÓ.Tde piezas fabricads yaceptadas por control industrial a cálirse enhoario laboral normal, segun las condiciones fijadas enAnexo 2 2 tOPIA FIEL DEL ORIGINAL DE INSTRUMENTO EEcTIVO DEPOSITADO EN ESTA INSPECCIÓN hLTRAAJO CON b  Prima de Producción De acuerdo a la eficiencia y cantidad de producción alcanzada en el proceso, la que se pagara según Qlpr taj iar1zdó üniplirseenel horario labral normal, según las condiciones fijadas en Anexo 2. 4 El trato de producción y la de prima de producción se calcularán según la productividad por hora de la maquinaria y según el número de personas que sean participes de proceso. Los trabajadores deberán preocuparse por mantener sus máquinas, moldes y herramientas en las mejores condiciones de operación para alcanzar alta productividad, debido a que se pagará de acuerdo a las producciones y eficiencias alcanzadas en el mes. B.4.Compensación al Esfuerzo. La Empresa postula que todos sus trabajadores profesionalicen sus funciones, que ejerzan en forma racional, con iniciativa y creatividad. La empresa dará la posibilidad de capacitación a todos sus empleados donde la selección de los trabajadores y las materias de capacitación se realizarán de común acuerdo entre el trabajador, su jefatura directa, director del área y el Departamento de Recursos Humanos de acuerdo al procedimiento de capacitación que se indica en Anexo 3 B.S. Preparación Tecnológica. La empresa otorgará las facilidades para que los trabajadores puedan estudiar o proseguir sus estudios técnicos o universitarios en materias relacionadas con las funciones de la empresa, para lo cual se acordará con el sindicato un procedimiento a seguir en cada caso. C REAJUSTE DE REMUNERACIONES las remuneraciones serán reajustadas cada cuatro meses en el 100% de variación que experimente, el Índice de Precios al Consumidor, IPC que establezca el Instituto Nacional de Estadística o por quien haga sus veces. los reajustes serán otorgados desde el 01 de Junio de 2012 01 de Octubre de 2012 01 de Febrero de 2013 01 de Junio de 2013 01 de Octubre de 2013 01 de Febrero de 2014 01 de Junio de 2014 01 de Octubre de 2014 3 01 de Febrero de 2015 01 de Junio de 2015 01 de Octubre de 2015 01 de Febrero de 2016 D PROTECCION A LOS TRABAJADORES Es de preocupación prioritaria de la empresa, adoptar todas las disposiciones necesarias para proteger eficazmente la vida, salud de sus trabajadores y seguridad, no sólo por el imperio de la ley  artículo 184 del código del trabajo , sino que por propia convicción en reconocimiento de la importancia de sus acciones individuales en los procesos y desarrollo de las tareas de los trabajadores. Para proporcionar protección personal técnicamente informada, la empresa contratará la asesoría y asistencia de una mutual. Además de lo anterior, la Empresa está permanentemente incentivando las actividades de Comité Paritario, dando curso a sus proposiciones y adquiriendo oportunamente los elementos de protección personal necesarios. E BONOS ESPECIALES  Valores Líquidos  El. Pago de Bonos En las oportunidades que se especifiquen, se pagarán cuando corresponda, los siguientes bonos, siempre que no constituyan doble beneficio de la misma causal y se cumpla con los requisitos estipulados en cada uno de ellos E.1.1.De Escolaridad la empresa pagará a los trabajadores que tengan hijos estudiando en algún establecimiento educacional, desde Pre-Kinder hasta Enseñanza Superior, un bono anual por cada hijo en tal condición, en los términos que se indican a continuación 1  Valores de los aportes por cada bono Tambien tendran derecho a un bono anual por estudio los trabajado es que sernatriculen Montos 2012 Montos base 2013 en adelante Pre Kinder y Kinder $47.500 $50.000 Ensefianza Básica $47.500 $50.000 Enseiianza Media $68.000 $70.000 Enseñanza Superior $68.000 $70.000 IZ en la Enseñanza Superior por la suma de $100 000 liquidos 1 1 vi 7 4 COPIA FIEL DEL ORIGiNAL DE INSTRUMENTO i. COLECTiVO DPOSITÁDO Er ESTA INSPECCION DEL TRASAJO CON FECHA.JJí,E&.2Lu2, 2  Requisito Para tener derecho a recibir estos bonos se deberá acreditar Certificado de matrícula y o de alumno regular Que el hijo estudiante sea menor de 25 años. 3  Fecha de pago. El pago se efectuará en el proceso de remuneración del mes de Febrero para aquello trabajadores que presenten el certificado indicado antes del 15 de Febrero de cada año o el día hábil siguiente. Para aquellos trabajadores que lo presenten con posterioridad a dicha fecha se les pagará en el proceso de remuneración del mes de Marzo y Abril de cada año siendo la fecha tope de entrega del certificado el 15 de Marzo y 15 de Abril o el día hábil siguiente respectivamente. Ambas bonificaciones no se anticiparán, se liquidarán y pagarán en el respectivo proceso de remuneraciones de los meses señalados. E.1.2. De Matrimonio. La empresa entregará Un bono equivalente a treinta mil pesos  $30.000  que se pagará en el proceso de remuneración más cercano post entrega del certificado correspondiente. Permiso por el día en que se realice el matrimonio legal, que no deberá ser sumado al de los 5 días del párrafo siguiente y que se considera trabajado. Cinco días consecutivos de permiso que se consideran trabajados para todos los efectos legales. Este último beneficio se otorgará al trabajador por una sola vez y no podrá sumarse al feriado legal ni a los días de feriado progresivo pendientes y tendrá solo un mes de vigencia, contado desde lá fecha del matrimonio. Para acceder a estos beneficios, el trabajador  a  deberá informar al Departamento de Recursos Humanos, con 30 días de anticipación la fecha de Iada y la fecha en que se iniciara el permiso por este concepto  4j 2 ,/—. E.1.3. De Nacimiento Por cada hijo que nazca, se proporcionará al trabajador a  previa presentación de los respectivos certificados de nacimiento Un bono equivalente en dinero por la suma de treinta mil pesos  $30.000  La empresa dará cumplimiento a lo indicado en el artículo 195 del Código del Trabajo, inciso segundo y, por lo tanto, ótorgará al padre un permiso pagado de 5 días en caso de nacimiento de un hijo, el que podrá utilizar a su elección desde el momento del parto, y en este caso será de días corridos, o distribuirlo dentro del primer mes desde la fecha del nacimiento. E.1.4. De Fiestas Patrias Dentro de la primera quincena del mes de Septiembre de cada año, la empresa pagará a cada trabajador una asignación de Fiestas Patrias equivalente a sesenta mil  $60.000  y entregará un paquete de mercadería definido en el párrafo 171131. E.1.5. De Navidad Dentro de la primera quincena del mes Diciembre de cada año, la empresa pagará a cada trabajador una asignación de Navidad equivalente a setenta y cinco mil pesos  $75.000  y entregará un paquete de mercadería definido en el párrafo 171131. E.16 De Vacaciones La empresa pagará una vez por año calendario a cada trabajador que haga uso de su feriado legal, siempre que este sea por un período continuo de a lo menos 10 días hábiles, un bono equivalente a sesenta mil  $60.000  y entregará un paquete de mercadería definido en el párrafo F1131. A contar del año 2013 en los meses de Enero, Febrero y Marzo anualmente los trabajadores también tendrán derecho a solicitar un préstamo, sin intereses hasta cincuenta mil pesos  $50.000 , el que deberá ser cancelado en dos cuotas iguales y sucesivas no prorrogables, en los meses de Abril y Mayo. E.2. Reajustabilidad de los bonos especiales. Estos bonos serán reajustados de acuerdo a la variación que experimente el Índice de Precios del Consumidor, desde la fecha de su último pago a la fecha que corresponda su otorgamiento. F REGALIAS La Empresa otorgará a sus trabajadores, dentro de la prirnérauirícenade cada mes, con la prioridad que se indica para cada caso, los siguientes be?eficios  1;";
            var prediction = _predEngine.Predict(doc);
            Console.WriteLine($"=============== Single Prediction just-trained-model - Result: {prediction.Type} ===============");

            // Original type: 20
            doc.ID = "329";
            doc.Contents = "CAMARA CHILENA DE LA CONSTRUCCION CONTRATO DE CONSTRUCCIÓN DE OBRA MATERIAL MENOR DE INMUEBLE POR SUMA ALZADA ENTRE CÁMARA CHILENA DE LA CONSTRUCCIÓN A.G. Y CONSTRUCTORA TERRATEC LIMITADA En Santiago de Chile, a 1 de abril de 2014, entre la CÁMARA CHILENA DE LA CONSTRUCCIÓN A.G., RUT Número 81.458.500-K, representada, según se acreditará, por don Sergio Torretti Costa, cédula nacional de identidad número 6.551.451-6 y por don Sergio Cavagnaro Santa María, cédula nacional de identidad número 5.863.426-3, todos con domicilio en esta ciudad, calle Marchant Pereira N° 10, tercer piso, comuna de Providencia, Región Metropolitana, en adelante indistintamente la Cámara o la CChC o la Mandante, por una parte y por la otra, la CONSTRUCTORA TERRATEC LIMITADA, RUT Número 76.832.960-5, representada, según se acreditará por don Gian Piero Chiappini, cédula nacional de identidad número 8.295.705-7, ambos domiciliados para estos efectos en Pasaje Las Monjas N° 235 comuna y ciudad de Viña del Mar, 5° Región, en adelante indistintamente el Mandatario o el Contratista, y exponen Antecedentes La CChC ha licitado la Remodelación y Habilitación de las oficinas de su sede regional en la Ciudad de Viña del Mar, según las Bases de Licitación, Especificaciones Técnicas, los Planos de Arquitectura y Especialidades aprobadas por la Cámara Chilena De La Construcción A.G. En conformidad a lo dispuesto en las bases de dicha licitación, han convenido en celebrar el presente Contrato de Construcción de Obra Material Menor de Inmueble por Suma Alzada, denominándose al Proyecto de REMODELACIÓN Y HABILITACIÓN DE OFICINAS SEDE REGIONAL CChC VALPARAISO, en la ciudad de Viña del Mar en adelante el Proyecto; de acuerdo a bases de dicha licitación, Especificaciones Técnicas, los Planos de Arquitectura y Especialidades aprobadas por el Mandante y que firmadas por las partes forman parte integral de este contrato, para todos los efectos legales, y junto Gorilas estipulaciones que a continuación se indican PRIMERO El Mandante encarga al Contratista quien acepta para si, a través de su representante, la ejecución de los trabajos que demanden la total y completa terminación del Proyecto, obras que por este acto se contratan, las cuales se realizarán en Avenida Limache número 1300, Viña del Mar, 5° Región, bajo la modalidad de suma alzada, según las especificaciones que se acompañan en los anexos de este contrato  Bases de Licitación, Especificaciones Técnicas, Planos de Arquitectura y Especialidades  1 Marchant Pereira 10, Piso 3 Providencia, Santiago, Chile Tel.  56 2  2376 3300 www.cchc.ct CAMARA CHILENA DE LA CONSTRUCCION El Contratista se obliga a dar estricto cumplimiento a sus obligaciones, en la forma que se especifica en el presente contrato, Bases de la Licitación, Planos de Arquitectura y Especialidades y de acuerdo a las condiciones ofrecidas en el proceso de licitación en su propuesta, además de todas las disposiciones que se contemplan en el presente documento. SEGUNDO Condiciones Generales. Las partes declaran que Conocen y aceptan, todos y cada uno de los documentos y antecedentes descritos precedentemente, y que éstos han sido determinantes y fundamentales para la celebración de este contrato; Los que debidamente firmados por las partes y anexados a este instrumento, se entienden forman parte integrante de él para todos los efectos legales. En caso de discrepancia, contradicción o inconsistencia entre los Anexos y el Contrato, prevalecerá este último, y en caso de discrepancia entre los propios Anexos del Contrato, las partes aplicarán aquella interpretación que favorezca la plena y cabal ejecución de las obras en la forma proyectada. Se deja expresa constancia, que en caso de omitirse detalles, necesarios para la correcta ejecución del Proyecto, el Contratista deberá entregar completamente terminada la obra de acuerdo a lo estipulado en las especificaciones técnicas y planos que forman parte del Proyecto.";
            prediction = _predEngine.Predict(doc);
            Console.WriteLine($"=============== Single Prediction just-trained-model - Result: {prediction.Type} ===============");

            // Original type: 1
            doc.ID = "390";
            doc.Contents = "IVAN TORREALBA ACEVEDO NOTARO PUBLICO HUERFANOS 97Y OF. 501 SANTIAGO 1 0.D./5 REP. N° 1824-02 3 Q1P RJWENTA FOiJO DE INVERSION INMOBILIARIA AETFIN-MIXTO A CV INMOBILIARIA VALLE GRANDE S.A. EN SANTIAGO DE CHILE, a cinco días del mes de Febrero de dos mil dos, aite mí, ] IF CABELLO ARROYO, chilena, casad&, 1 1 1 1 abogado, cdula nacional de identidad número seis millonesS;.ciento novita y cuatrc mil seiscuenLos dos guión cero, 11Notario Supiente dci Tittlar de la Trigésima Tercera Notaría de Santiagc1, don IVAN TORREALBA ACEVEDO, según Decreto Judicial yc protocolizado, con oficio en calle Huérfanos a ;.-novecientos setenLa y ni eve, oficina quinientos uno, de la Comuna de antiago, comparecen INMOBILIARIA VALLE GRADE 4 S A socuodad del giro de su denominación, rol único 2.  RElJ.O 4ROÓ,  Y11RiO V PLET 3. mil DES. TI.lQ  H   ;   tributarO número novcnta y seis millones ochocientos setenta ,; seisclenLs veinte guión uno, quien y seis u represen.ada según s acreditará, por don LAVIO HERRE  PIZARRO, chileno, soltero, abogado, cédula nacional. identida número neve millones ochocientos setenta y seis mil noveCierOS veiiLc gLÓfl K, ambos domiciliados para estos efectos n calle MratoreS número ciento setenta y ocho, piso veinticl-i tro, C tvrna e. Santiago, Región Metropolitana, en adelantc indistifl1ame el Vendedor, por una parte, y por la otra, el. FO D  DT INVERSION INTMOBILIARIA AETFIN-MIXTO, quien cc íparece rcpresentadO, según se acreditará, por IN ADMINIS1 DORA 5E FONDOS DE INVERSIÓN S A antes denominada j Aetna Ac inistradora de Fondos de Inversión S A persona4 jurídica del gro de su denominación, rol único tributario número r venta y seis millones quinientos setenta y seis mil seiscier os sese ita gión k, por quien comparecen don CARLOS PAUT UGRTE, cLleno casado, ingeniero comercial, cédui a nacional de iditidac número cinco millones ciento dos mil seteciel os cincuenta y ocho guión dos, y don PABLO FERNANDEZ ALASR, chlno, casado, ingeniero comercial, cédula nacional de idertidad ndmero ocho millones quinientos treinta mil cm uenta y cinco guión cinco, todos domiciliados en SantiagC Avenia Suecia número doscientos once, piso catorce X. comuna c. ProviJenc3a, en adelante también el FondO Compradcr, los compc recientes mayores de edad, acreditarfl su identi-dad cor las cédulas mencionadas y exponen inmobil VE11.8 C ande S A es dueña de los siguientes.riai inmuebl provenenLS del. plano de. subdivisión lIlí 1 propiedad denom4-flada i1 Retiro de Quilicura, que correspondeti a la par ela Núfl L0 dc s del plano de subdivisión de la Parcela 2 comparece. PRIMERO. -4 , VAN TORREALBA ACEVEDO ¼NOTARIO PUBL1CO HUERFANOS 979 OF. 501 SANTIAGO número veinticinco del. predio. antes. denominado. Parte del Fundo. La Vilana;. Comuna de Larnpa,. Región Metropolitana, cuyos deslindes conforme a sus títulos son los siguientes. LOTE NTJM2RO CIENTO ONCE. con una superficie aproximada de cinco mil. doscientos. metros. setenta cuadrados, y. cuyos deslindes SOn al Norte, en setenta y seis coma setenta metros con lote numero ciento diez; al Sur,. en setenta y seis Coma diezmeti-os con calle Valle Alto;. al Oriente,. en sesenta y nueve metros con calle Huepil; y al Poniente,. en sesenta ocho coma noventa metros con lote número ciento veinte. El  título se enuenLra inscrito a su nombre a fojas veintiocho mil ochocientas setenta y nueve número veinticinco mil ciento treinta y cuatro del Registro de Propiedad del Conservador de Bienes de. aíces SaiLiago,. correspondiente al. mil año. noveclenLos nove-ita y seis. LOTE NUNERO CIENTO DOCE.-con una superficie aproximada de cinco mil ochocientos cincuenta y dos metros cuadrados, y cuyos deslindes son Norte, en setenta4.. seis diez con. conu metros calle. Valle Alto; al Sur,. en  setenta y. seis. metros con. número trece;. lote ciento a Oriente,. en setenta y seis. coma noventa metros. con calle Huepil; al Poniente, en setenta y seis coma noventa metros con lote número ciento diecinueve. El título se encuentra inscrito. a su nombre a fojas veintiocho mil ochocientas setenta y nueve número veinticinco mil ciento treinta y cinco del Registro dé. del. Propiedad. Conservador, de. Raíces de. corresporrilente al año. Bienes Santiágo,. mil novecientos noventa y seis. LOTE NIJNERO CIENTO TRECE con una superficie aproximada decd.ncó mil ochocientos metros y  veintinueve cuadrados, cuyd deslindes Son. al Norte, en setenta y seis rneros con lote número cientc 1 doce; al Sur, en setenta y seis metros con lote 3 Ü. 33r07.p, 1 Si numero cntO caLorce, al Oriente, en setenta y seis coma tros cii cal e Huepil, Poniente, en setenta y seis noventa if coma cinc Lenta ircrOS con lote número ciento dieciocho El  O  título se encUeflTa inscritO a su nombre a fojas veintiocho  mil ochoc entas cchenE número veinticincO mil ciento treinta y seis dl Registro de propiedad del Conservador de Bienes  Raíces de SantiajO, corespondieflte al año mil novecientos ;   con una CIENTO CATORCE seis LOTt NB1ERO noventa. superfiCi aproximada de cinco mil setecientos noventa metros selE cuadrados y cuyo des] ndes son al Norte, en setenta y ; -; metros co lote núrrerO ciento trece, al Sur, en setenta y seisi metros cc lote riero ciento quince al Oriente, en $eeN° 1 y seis co a cincUta etros con calle Huepil, y al Poniente en setenLa y sei3 como veinte metros con lote número ciento  3 El título se encuentra inscrito a su nombre  V diecisieL 1 fojas veitiocho mil cchocientas ochenta numero veintiCifl treitE y siete del Registro de propiedad de1 mil cien 3 II a1 Conserva  r de Benes aíces de Santiago, correspondiente LOTE NÚMERO CIENTO mil novecefltoS noventa y seis año on una superficie aproximada de siete mil doscientos QUINCE cincuent y cuatro metros cuadrados, y cuyos deslindes SOfl al Norte en setenta j seis metros con lote número ciento COn Camino catorce, Sur, en 5eterca y seis coma diez metros 1, La Montai, al Oicnte en noventa y Cinco coma sesenta metros coma con callo Huepil4 al Poniente, en noventa y cincO Y títuló. cuarenta metros con lcte número ciento dieciséis El mil se encue tra iricriLC a su nombre a fojas veintiocho ciento ochoc1ena5 ochenta y una número veinticinco mil ocho c1 el Re  istro de propiedad del Conservador de treinta. año mil Bienes i tíces de Sa tiago, correspondiente al t1. ;  VAN TOREALBA ACEVEDO ;  r NOTARIO PUBLtCO   V. HUERFANOS 979 OF 501 SANTAGO  novec1enLs novenLa y sois LOTE NUMERO CIENTO DIECISEIS Con   una supe Eicie aproximada de siete mil ciento ochenta y dos C3 metros cttdrados y cuys deslindes son Al Norte en setenta  y seis mcLros con Lote número Ciento diecisiete, Al Su r en   setenta y seis metros con Camino La Montaña; Al  Oriexiteeil,  n , noventa. y cinco coma cuarenta metros con Lote número Ciento quince, y Al Poniente en noventa y cinco coma diez metros con calle YuPay. El título se encuentra inscrito s su nombre a fojas ventiocho mil ochocientas ochenta y una número veinticinco mil ciento treinta y nueve de ]. Registro de  ; ,. ;  Propiedae del Conservador de Bienes Raíces de Santiago, ,  correspoIaiente al año mil novecientos noventa y seis LOTE NUMERO Cj NTO DITCISIEiE  Con una superficie aproximada de cinco mil setecienLos treinta y nueve metros cuadrados y cuyo -; WN deslindes on Al Norte en setenta y seis metros con Lote   1 número Cinto dicocho, Al Sur en setenta y seis metros con  1  Lota númo Ciento dieciséis, Al Oriente en setenta y sei coma veite metos con Lote número Ciento catorce, y Al Poniente en setenta y seis coma treinta metros con clle Yungay. 4 l titu±o se encuentra inscrito s su nombre a foja l veintiocho mil ochocio -itas ochenta y dos número veinticinco mil ciento cuarenta de] Registro de Propiedad del Conservador de Bienes Raíces de Santiago, correspondiente al año 4 é mi]. novecientos noverca y seis LOTE N1flERO CIENTO DIECIOCHO.-Con 1 una superficie aproximada de cinco mil setecientos ochenta y dos metros cuadrados y cuyos deslindes son Al Norte en setenta y seis metros con Lote número Ciento diecinueve, Al Sur en setenta y seis metros con Lote número Cientt A diecisiete, Al Oriente en setenta y seis coma cincuenta 1 metros coi Lote número Ciento trece, y Al Poniente en setenta a cincuenta metros con calle Yungay. El titulo s y seis -cov., nombre a veintiocho. fojas. mil encuentra inscrito s su. dos veinticinco mil. ochenta y. número ciento uno del Ieg.i.stro de Propiedad del Conservar.de.Y., ochocient s. cuarenta. rnii. de correspondiente año. ienes SanLiago, al. Rices. novecieflt, S novelita y seis. LOTE NUMERO CIENTO DIECINUEVE Con una si  erflcle aproximada de cinco mil setecientos noventa y cuyos deslindes son en Al Norte. y ocho meros cudrado. setenta y seis meuios CÚfl calle Valle Alto, Al Sur. en setenta y seis me ros con Lote número Ciento dieciocho, Al Oriente Cieto n y seis coma noventa metros con Lote número. en setent. en setenta y seis coma cincuenta metros Poniente. con calle Yungay";
            prediction = _predEngine.Predict(doc);
            Console.WriteLine($"=============== Single Prediction just-trained-model - Result: {prediction.Type} ===============");

            // <SnippetReturnModel>
            return trainingPipeline;
            // </SnippetReturnModel>

        }

        public static void Evaluate(DataViewSchema trainingDataViewSchema)
        {
            // STEP 5:  Evaluate the model in order to get the model's accuracy metrics
            Console.WriteLine($"=============== Evaluating to get model's accuracy metrics - Starting time: {DateTime.Now.ToString()} ===============");

            //Load the test dataset into the IDataView
            // <SnippetLoadTestDataset>
            var testDataView = _mlContext.Data.LoadFromTextFile<Document>(_testDataPath, hasHeader: true);
            // </SnippetLoadTestDataset>

            //Evaluate the model on a test dataset and calculate metrics of the model on the test data.
            // <SnippetEvaluate>
            var testMetrics = _mlContext.MulticlassClassification.Evaluate(_trainedModel.Transform(testDataView));
            // </SnippetEvaluate>

            Console.WriteLine($"=============== Evaluating to get model's accuracy metrics - Ending time: {DateTime.Now.ToString()} ===============");
            // <SnippetDisplayMetrics>
            Console.WriteLine($"*************************************************************************************************************");
            Console.WriteLine($"*       Metrics for Multi-class Classification model - Test Data     ");
            Console.WriteLine($"*------------------------------------------------------------------------------------------------------------");
            Console.WriteLine($"*       MicroAccuracy:    {testMetrics.MicroAccuracy:0.###}");
            Console.WriteLine($"*       MacroAccuracy:    {testMetrics.MacroAccuracy:0.###}");
            Console.WriteLine($"*       LogLoss:          {testMetrics.LogLoss:#.###}");
            Console.WriteLine($"*       LogLossReduction: {testMetrics.LogLossReduction:#.###}");
            Console.WriteLine($"*************************************************************************************************************");
            // </SnippetDisplayMetrics>

            // Save the new model to .ZIP file
            // <SnippetCallSaveModel>
            SaveModelAsFile(_mlContext, trainingDataViewSchema, _trainedModel);
            // </SnippetCallSaveModel>

        }

        public static void PredictDocument()
        {
            // <SnippetLoadModel>
            ITransformer loadedModel = _mlContext.Model.Load(_modelPath, out var modelInputSchema);
            // </SnippetLoadModel>

            // <SnippetAddTestIssue> 
           // Correct Type: 5
            Document singleDoc = new Document() { ID = "301", Contents = "CONSTRUCTORA NILAHUE CONSTRUCCION EMBALSE CONVENTO VIEJO 4 1 SEGUNDA ETAPA CONSTRUCTORAI NII/HU[1 CONTRATO DE TRABAJO 348297 En Chimbarongo, a 6,ntre Constructora NILAHUE S.A. RUT. N° 99.593.600-3, representada por don ú Alfredo Achondo Pelma, RUT. 8.517.622-6 ambos domiciliados en calle Ebro 2705, comuna de Las Condes, Santiago, en adelante La Empresa o El Empleador, por otra parte, don Manuel Jesus Diaz Allende, nacionalidad Chilena, nacido el 07 de Marzo de 1961 cédula de identidad N° 0009040141-6, estado civil Soltero, domiciliado en Sitio 12 Los Pretiles Comuna Chimbarongo, Ciudad Chimbarongo, en adelante El Trabajador, se ha convenido el contrato de trabajo que consta de las siguientes estipulaciones PRIMERO El trabajador se compromete a realizar las funciones de sJ IiEiTM4to5ri9t7en el proyecto -denominado Construcción Embalse Convento Viejo II Etapa, contratado para el mandante, Ministerio de Obras Públicas T.T, y todos los demás servicios que digan relación con el cargo contratado, desempefiándose habituaímente en las dependencias del empleador ubicadas en la Ciudad de Chimbarongo, en la Comuna de Chimbarongo. Así como también en aquellos lugares que se le asigne y a los cuales deba desplazarse para dar cumplimiento a las funciones que se le encomiendan por medio de este contrato. El trabajador se compromete a cumplir las órdenes e instrucciones que le imparta la dirección de la empresa, los jefes correspondientes, como asimismo con las normas que establezcan los reglamentos de la compañía y prácticas del régimen interno de ésta. SEGUNDO Conforme a lo dispuesto en el artículo 39 del Código del Trabajo, la jornada ordinaria de trabajo será de 45 horas semanales y se distribuirá de lunes a viernes de la siguiente manera. -Lunes a Jueves de 0800 Hrs. A 1930 Hrs. y -Viernes de 0800 Hrs. A 1700 Hrs. -Colación 1230 hrs. A 1430 hrs. Tiempo que no será imputable a la jornada laboral. TERCERO Son obligaciones del trabajador, sin perjuicio de las inherentes a su contrato y a lo dispuesto en los reglamentos o instrucciones de la empresa, las siguientes Someterse a los estatutos y al Reglamento Interno de la empresa, instrucciones y demás directrices, verbales o escritas que imparta la empresa o los jefes correspondientes y a las normas legales vigentes Mantener una conducta laboral y privada intachable; Respetar y acatar las obligaciones y prohibiciones qué Constructora Nilahue S. A., tengan en los sitios de faenas que el trabajador declara conocer, por lo que son considerados parte integrante del presente contrato para todos los efectos; Utilizar y cuidar los elementos de protección personal que le entregue la empresa, como asimismo acatar todas las instrucciones sobre su uso o cualquier otra que se imparta con el fm de cuidar la integridad del trabajador, de terceros y/o bienes de la empresa. CUARTO El empleador se compromete a remunerar al trabajador con la suma de ciento setenta y tres mil ochocientos pesos  como sueldo base por mes. El sueldo se pagará en mensualidades vencidas, el último día de cada mes, si este fuese viernes. Si el último día del mes no correspondiera a un día viernes, el sueldo se pagará el primer día viernes del mes siguiente o el día hábil anterior si éste último fuese feriado, en dinero efectivo, cheque o vale vista a nombre del Trabajador o mediante depósito en cuenta bancaria, la que de no disponer el Trabajador, el empleador podrá gestionar su apertura en un banco de la plaza. El Empleador hará las deducciones por impuestos, cotizaciones de seguridad social y demás que ordena la ley. La Empresa, además, pagará anualmente una gratificación de un 25% de lo pagado o devengado en el respectivo ejercicio comercial por concepto de remuneraciones mensuales, con un tope anual de 4.75 ingresos mínimos mensuales. Mensualmente se anticipará y liquidará la proporción devengada de este beneficio, entendiéndose que la Empresa se acoge y cumple así con lo dispuesto en el artículo 50 del Código del Trabajo. Página 1 de 2 CONSTRUCTORA NILAHUE CONSTRUCCION EMBALSE CONVENTO VIEJO SEGUNDA ETAPA O ON STA U CTO PAl NII/HUIE1 Se acuerda expresamente que los aumentos de remuneraciones que se pacten se imputarán siempre a los reajustes legales obligatorios que se dicten. QUINTO Cualquier prestación ocasional o periódica que la Empresa conceda al trabajador, fuera de las que corresponda según el presente contrato, sus anexos escritos o con las disposiciones legales, se entenderá conferida por dicha ocasión yio a título de mera liberalidad y no dará al trabajador derecho futuro alguno. La Empresa podrá suspender o modificar a su entero arbitrio las eventuales prestaciones ocasionales o periódicas antes referidas. SEXTO La Empresa proporcionará al trabajador los elementos de protección personat necesarios para ejecutar su trabajo en forma segura de acuerdo al criterio de la empresa, incluido un par de zapatos de seguridad nuevos. El trabajador, cada vez que reciba elementos de protección personal, se obliga desde ya a firmar en señal de conformidad un documento en el cual se deja constancia de su recepción. SEPTIMO El trabajador declara haber recibido un ejemplar del Reglamento Interno de Orden, Higiene y Seguridad de la empresa, declarando conocerlo y aceptarlo. OCTAVO El trabajador declara estar afiliado a AFP. Bansander y para los efectos de salud a Fonasa. NOVENO El presente contrato tendrá una duración hasta el 30-04-06 y de no mediar aviso previo se renovará por un nuevo periodo de 30 Días. DEC1MO Las partes fijan su domicilio en la ciudad de Santiago para todos los efectos del contrato. DECIMO PRIMERO Se deja constancia que el Trabajador ingresó al servicio del Empleador el 05-04-06, para todos los efectos legales. DECIMO SEGUNDO En la faena señalada en la cláusula primera y en aplicación a lo dispuesto en el articulo 184 del Código del Trabajo, que establece normas sobre protección a los trabajadores y como una de las medidas de seguridad que se aplicará por la empresa en la faena en ejecución y cuyo objetivo es precaver y evitar accidentes del trabajo, el trabajador acepta voluntariamente someterse a la realización de cursos de capacitación, charlas de inducción y a los exámenes médicos que sean necesarios de conformidad a lo establecido en el Reglamento Interno de la empresa y a las normas sobre Política de Alcohol y Drogas que imparta la empresa mandante o dueña de la obra o faena, Ministerio de Obras Publicas T.T., todas las que el trabajador conoce y acepta. DECIMO TERCERO El presente contrato se firma en tres ejemplares, quedando dos en poder del empleador y uno en el del trabajador, dejándose constancia que toda modificación al mismo debe constar por escrito y firmado por ambas partes al dorso o en documentos anexos al presente instrumento. Trabajador del Empleador Manuel Jesus Diaz Allende Rut 99.593.600 3 C.I. N°0009040141-6 — j Recibí copiaPágina 2 de 2 4 webdox Portada de Documento Contenedor Folio Fontaine & Cía. 62 16 Cliente Temática Materia Nombre Fecha Documento Comentarios Brotec Concesionaria Convento Viejo S.A. Antecedentes Laborales Finiquito Declaración, transacción, recibo y finiquito, Manuel Jesus Diíaz Allende 31/05/2006 Sin comentarios 64f8178de6ce4bc49b1 13406bc703d11 1 webdox 9/25/2013 92106 AM CONSTRUCTORA NILAHUE CONSTRUCCION EMBALSE CONVENTO VIEJO SEGUNDA ETAPA CO N GTRU OTO PA NIL/H U lE DECLARACION,TRANSACCION, RECIBO Y FINIQUITO En Constructora Nilahue S A rol unico tributario N 99 593 600 3 representada por don Alfredo Achondo Puelma, RUT. 8.517.622-6 ambos domiciliados en calle Ebro 2705, comuna de Las Condes, Santiago, por una parte y por la otra, don DIAZ ALLENDE MANUEL JESUS, cedula de identidad N° 0009040141-6, se ha convenido la presente transacción, recibo y finiquito que consta en las cláusulas siguientes PRIMERO Don D1AZ ALLENDE MANUEL JESUS, declara haberle prestado servicios como MAESTRO iRA MOTOSIERRA a Constructora Nilahue S.A., desde el día 05-Abr-06, hasta el día 30-Mav-06, fecha en que el primero ha puesto termino a su contrato individual de trabajo por la causal establecida en el articulo 159 Inciso 41 Vencimiento del plazo convenido en el contrato., Código del Trabajo. SECUNDO Declara asimismo don DIAZ ALLENDE MANUEL JESUS que durante todo el tiempo que presto sus servicios, recibió fiel y oportunamente de Constructora Nilahue S.A., el total de las remuneraciones y demás prestaciones laborales convenidas y/o legalmente procedentes. TERCERO Con motivo del presente finiquito y transacción, Constructora Nilahue S.A. paga en este acto con Vale Vista BancoEstado, a don NAZ ALLENDE MANUEL JESUS, quien declara recibir a su satisfacción, la suma liquida de $315.207.—  trescientos quince mil doscientos siete pesos pesos , de acuerdo con la liquidación indicada a continuación. Las partes convienen que la suma anteriormente indicada se percibe por el trabalador como única y total compensación por cualquier derecho que hubiera podido corresponderle a este derivado del contrato del trabajo y además como transacción por cualquier derecho que hubiere podido corresponderle, y para precaver cualquier eventual litigio entre las partes derivado de las relaciones laborales que mantuvieron y de la terminación de los servicios. HABERES VALOR 8 FOTAL A PAGAR SEGÚN DETALLE ADJUNTO $3 15.207  CUARTO Declara don DIAZ ALLENI E MANUEL JESUS que Constructora Nilahue S.A. nada le adeuda, especialmente por sueldo, reajustes de sueldos, horas extraordinarias, gratificaciones legales o contractuales, feriado, bonificaciones, imposiciones legales, indemnizaciones por desahucio, falta de aviso previo, años de servicios, feriados, etc., " };
            // </SnippetAddTestIssue> 

            //Predict label for single hard-coded issue
            // <SnippetCreatePredictionEngine>
            _predEngine = _mlContext.Model.CreatePredictionEngine<Document, TypePrediction>(loadedModel);
            // </SnippetCreatePredictionEngine>

            // <SnippetPredictIssue>
            var prediction = _predEngine.Predict(singleDoc);
            // </SnippetPredictIssue>

            // <SnippetDisplayResults>
            Console.WriteLine($"=============== Single Prediction - Result: {prediction.Type} ===============");
            // </SnippetDisplayResults>

        }

        private static void SaveModelAsFile(MLContext mlContext, DataViewSchema trainingDataViewSchema, ITransformer model)
        {
            // <SnippetSaveModel> 
            mlContext.Model.Save(model, trainingDataViewSchema, _modelPath);
            // </SnippetSaveModel>

            Console.WriteLine("The model is saved to {0}", _modelPath);
        }

    }
}